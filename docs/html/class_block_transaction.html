<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>MCModeler: BlockTransaction Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MCModeler
   &#160;<span id="projectnumber">0.1dev2</span>
   </div>
   <div id="projectbrief">MCModeler Minecraft planning and visualization tool</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_block_transaction.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">BlockTransaction Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents an atomic operation on the world that involves adding, removing, and replacing blocks.  
 <a href="class_block_transaction.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="block__transaction_8h_source.html">block_transaction.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for BlockTransaction:</div>
<div class="dyncontent">
<div class="center"><img src="class_block_transaction__coll__graph.png" border="0" usemap="#_block_transaction_coll__map" alt="Collaboration graph"/></div>
<map name="_block_transaction_coll__map" id="_block_transaction_coll__map">
<area shape="rect" id="node2" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html" title="QList\&lt; BlockInstance \&gt;" alt="" coords="5,6,163,34"/><area shape="rect" id="node4" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qset.html" title="QSet\&lt; BlockPosition \&gt;" alt="" coords="187,6,341,34"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_block_transaction-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8eac8c781c17afa9f7a7f28a15fa1879"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#a8eac8c781c17afa9f7a7f28a15fa1879">BlockTransaction</a> ()</td></tr>
<tr class="memdesc:a8eac8c781c17afa9f7a7f28a15fa1879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a8eac8c781c17afa9f7a7f28a15fa1879"></a><br/></td></tr>
<tr class="memitem:a6b0c5e8671704c302b8737ab0e904c06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#a6b0c5e8671704c302b8737ab0e904c06">replaceBlock</a> (const <a class="el" href="class_block_instance.html">BlockInstance</a> &amp;old_block, const <a class="el" href="class_block_instance.html">BlockInstance</a> &amp;new_block)</td></tr>
<tr class="memdesc:a6b0c5e8671704c302b8737ab0e904c06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Records the replacement of <code>old_block</code> with <code>new_block</code>.  <a href="#a6b0c5e8671704c302b8737ab0e904c06"></a><br/></td></tr>
<tr class="memitem:a8b22719e10cbadbeae1b2b5ea33a6a8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#a8b22719e10cbadbeae1b2b5ea33a6a8b">setBlock</a> (const <a class="el" href="class_block_instance.html">BlockInstance</a> &amp;new_block)</td></tr>
<tr class="memdesc:a8b22719e10cbadbeae1b2b5ea33a6a8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Records the addition of <code>new_block</code>.  <a href="#a8b22719e10cbadbeae1b2b5ea33a6a8b"></a><br/></td></tr>
<tr class="memitem:a8eb1692c4ad10ac1efbb6aba998e1e63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#a8eb1692c4ad10ac1efbb6aba998e1e63">clearBlock</a> (const <a class="el" href="class_block_instance.html">BlockInstance</a> &amp;old_block)</td></tr>
<tr class="memdesc:a8eb1692c4ad10ac1efbb6aba998e1e63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Records the removal of <code>new_block</code>.  <a href="#a8eb1692c4ad10ac1efbb6aba998e1e63"></a><br/></td></tr>
<tr class="memitem:a91de4bbf9897e3aa052a66de8fac20c6"><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html">QList</a>&lt; <a class="el" href="class_block_instance.html">BlockInstance</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#a91de4bbf9897e3aa052a66de8fac20c6">old_blocks</a> () const </td></tr>
<tr class="memdesc:a91de4bbf9897e3aa052a66de8fac20c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of blocks that are removed from the world by this transaction.  <a href="#a91de4bbf9897e3aa052a66de8fac20c6"></a><br/></td></tr>
<tr class="memitem:af17795b86e97d151d13740a58d57dd2e"><td class="memItemLeft" align="right" valign="top">const <a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html">QList</a>&lt; <a class="el" href="class_block_instance.html">BlockInstance</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#af17795b86e97d151d13740a58d57dd2e">new_blocks</a> () const </td></tr>
<tr class="memdesc:af17795b86e97d151d13740a58d57dd2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of blocks that are added to the world by this transaction.  <a href="#af17795b86e97d151d13740a58d57dd2e"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad03fbeabdc4918d9d4a04b54c09bee75"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qset.html">QSet</a>&lt; <a class="el" href="class_block_position.html">BlockPosition</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#ad03fbeabdc4918d9d4a04b54c09bee75">old_positions_</a></td></tr>
<tr class="memitem:ab0a056229027c15c45914b6da292a30e"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qset.html">QSet</a>&lt; <a class="el" href="class_block_position.html">BlockPosition</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#ab0a056229027c15c45914b6da292a30e">new_positions_</a></td></tr>
<tr class="memitem:a8ac0b736d708e9d206c500fe9edf31a6"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html">QList</a>&lt; <a class="el" href="class_block_instance.html">BlockInstance</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#a8ac0b736d708e9d206c500fe9edf31a6">old_blocks_</a></td></tr>
<tr class="memitem:a138b6cd80f98400a737c6b009e4f585b"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html">QList</a>&lt; <a class="el" href="class_block_instance.html">BlockInstance</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_block_transaction.html#a138b6cd80f98400a737c6b009e4f585b">new_blocks_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Represents an atomic operation on the world that involves adding, removing, and replacing blocks. </p>
<p><a class="el" href="class_block_transaction.html" title="Represents an atomic operation on the world that involves adding, removing, and replacing blocks...">BlockTransaction</a> is the basis for MCModeler's model/view separation (in the sense of model-view-controller, not model-view matrix). Rather than modifying the <a class="el" href="class_diagram.html" title="Represents a diagram containing block data for the world.">Diagram</a> (which serves as the model) directly, view classes (such as <a class="el" href="class_level_widget.html" title="The canvas widget with which the user can interact to add and remove blocks.">LevelWidget</a>) ask the <a class="el" href="class_diagram.html" title="Represents a diagram containing block data for the world.">Diagram</a> to perform operations like drawing lines, filling regions, and erasing blocks. The <a class="el" href="class_diagram.html" title="Represents a diagram containing block data for the world.">Diagram</a> creates a <a class="el" href="class_block_transaction.html" title="Represents an atomic operation on the world that involves adding, removing, and replacing blocks...">BlockTransaction</a> that describes the changes to the world as a result of the operation, applies the <a class="el" href="class_block_transaction.html" title="Represents an atomic operation on the world that involves adding, removing, and replacing blocks...">BlockTransaction</a> to its own internal model, and then broadcasts it back to all the views, which apply the same transaction on their own representations.</p>
<p>The manner in which the transaction is applied differs by view, but in general it goes like this:</p>
<div class="fragment"><div class="line">    <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="class_block_instance.html" title="Represents a particular instance of a block.">BlockInstance</a>&amp; block, transaction.old_blocks()) {</div>
<div class="line">      myImaginaryRemoveBlockMethod(block);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="class_block_instance.html" title="Represents a particular instance of a block.">BlockInstance</a>&amp; block, transaction.new_blocks()) {</div>
<div class="line">      myImaginaryAddBlockMethod(block);</div>
<div class="line">    }</div>
</div><!-- fragment --><p>Although you can call <a class="el" href="class_block_transaction.html#a8eb1692c4ad10ac1efbb6aba998e1e63" title="Records the removal of new_block.">clearBlock()</a> and <a class="el" href="class_block_transaction.html#a8b22719e10cbadbeae1b2b5ea33a6a8b" title="Records the addition of new_block.">setBlock()</a> on the transaction in any order you like, the view must always remove blocks <em>before</em> it adds blocks.</p>
<p>BlockTransactions record both the old and new states of the world, so they can be used to undo operations as well, by simply removing the new blocks and adding back the old ones. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8eac8c781c17afa9f7a7f28a15fa1879"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BlockTransaction::BlockTransaction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6b0c5e8671704c302b8737ab0e904c06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlockTransaction::replaceBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_block_instance.html">BlockInstance</a> &amp;&#160;</td>
          <td class="paramname"><em>old_block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_block_instance.html">BlockInstance</a> &amp;&#160;</td>
          <td class="paramname"><em>new_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Records the replacement of <code>old_block</code> with <code>new_block</code>. </p>
<p>The blocks must have the same position. If <code>old_block</code> has a type of kBlockTypeAir, this is equivalent to <a class="el" href="class_block_transaction.html#a8b22719e10cbadbeae1b2b5ea33a6a8b" title="Records the addition of new_block.">setBlock()</a>. If <code>new_block</code> has a type of kBlockTypeAir, this is equivalent to <a class="el" href="class_block_transaction.html#a8eb1692c4ad10ac1efbb6aba998e1e63" title="Records the removal of new_block.">clearBlock()</a>.</p>
<p>Only the first replacement per position per transaction will be honored. So in the following code:</p>
<div class="fragment"><div class="line">      <a class="code" href="class_block_prototype.html" title="Provides access to data and behavior common to a particular kind of block.">BlockPrototype</a>* dirt = <a class="code" href="class_block_manager.html#a8204e8ef599e44f0be6a4a70f20024bd" title="Gets the BlockPrototype for type.">BlockManager::getPrototype</a>(0);</div>
<div class="line">      <a class="code" href="class_block_prototype.html" title="Provides access to data and behavior common to a particular kind of block.">BlockPrototype</a>* grass = <a class="code" href="class_block_manager.html#a8204e8ef599e44f0be6a4a70f20024bd" title="Gets the BlockPrototype for type.">BlockManager::getPrototype</a>(1);</div>
<div class="line">      <a class="code" href="class_block_instance.html" title="Represents a particular instance of a block.">BlockInstance</a> dirt_block(dirt, <a class="code" href="class_block_position.html" title="A lightweight integer-precision position class for blocks.">BlockPosition</a>(0, 0, 0), dirt-&gt;<a class="code" href="class_block_prototype.html#aecee73acb976383a0a1c7717fbe8da80" title="Returns the default orientation for blocks of this type.">defaultOrientation</a>());</div>
<div class="line">      <a class="code" href="class_block_instance.html" title="Represents a particular instance of a block.">BlockInstance</a> grass_block(grass, <a class="code" href="class_block_position.html" title="A lightweight integer-precision position class for blocks.">BlockPosition</a>(0, 0, 0), grass-&gt;<a class="code" href="class_block_prototype.html#aecee73acb976383a0a1c7717fbe8da80" title="Returns the default orientation for blocks of this type.">defaultOrientation</a>());</div>
<div class="line">      <a class="code" href="class_block_transaction.html" title="Represents an atomic operation on the world that involves adding, removing, and replacing blocks...">BlockTransaction</a> transaction;</div>
<div class="line">      transaction.<a class="code" href="class_block_transaction.html#a6b0c5e8671704c302b8737ab0e904c06" title="Records the replacement of old_block with new_block.">replaceBlock</a>(dirt_block, grass_block);</div>
<div class="line">      transaction.replaceBlock(grass_block, dirt_block);</div>
</div><!-- fragment --><p>The transaction will record the replacement of dirt with grass at 0, 0, 0, but will <em>not</em> record the subsequent reversion of that replacement. </p>

</div>
</div>
<a class="anchor" id="a8b22719e10cbadbeae1b2b5ea33a6a8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlockTransaction::setBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_block_instance.html">BlockInstance</a> &amp;&#160;</td>
          <td class="paramname"><em>new_block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Records the addition of <code>new_block</code>. </p>
<p>If you call <a class="el" href="class_block_transaction.html#a8eb1692c4ad10ac1efbb6aba998e1e63" title="Records the removal of new_block.">clearBlock()</a> and <a class="el" href="class_block_transaction.html#a8b22719e10cbadbeae1b2b5ea33a6a8b" title="Records the addition of new_block.">setBlock()</a> (in either order) for the same position in the same transaction, the result will be exactly equivalent to calling <a class="el" href="class_block_transaction.html#a6b0c5e8671704c302b8737ab0e904c06" title="Records the replacement of old_block with new_block.">replaceBlock()</a>.</p>
<dl class="section warning"><dt>Warning:</dt><dd>Do <em>not</em> call setBlock without a corresponding <a class="el" href="class_block_transaction.html#a8eb1692c4ad10ac1efbb6aba998e1e63" title="Records the removal of new_block.">clearBlock()</a> unless you are absolutely certain that there is currently no block at the position of <code>new_block</code>. If there is, you will corrupt the undo stack because the removal of the original block will not be recorded. When in doubt, always use <a class="el" href="class_block_transaction.html#a6b0c5e8671704c302b8737ab0e904c06" title="Records the replacement of old_block with new_block.">replaceBlock()</a>.</dd></dl>
<p>Only the first addition per position per transaction will be honored. So in the following code:</p>
<div class="fragment"><div class="line">      <a class="code" href="class_block_prototype.html" title="Provides access to data and behavior common to a particular kind of block.">BlockPrototype</a>* dirt = <a class="code" href="class_block_manager.html#a8204e8ef599e44f0be6a4a70f20024bd" title="Gets the BlockPrototype for type.">BlockManager::getPrototype</a>(0);</div>
<div class="line">      <a class="code" href="class_block_prototype.html" title="Provides access to data and behavior common to a particular kind of block.">BlockPrototype</a>* grass = <a class="code" href="class_block_manager.html#a8204e8ef599e44f0be6a4a70f20024bd" title="Gets the BlockPrototype for type.">BlockManager::getPrototype</a>(1);</div>
<div class="line">      <a class="code" href="class_block_instance.html" title="Represents a particular instance of a block.">BlockInstance</a> dirt_block(dirt, <a class="code" href="class_block_position.html" title="A lightweight integer-precision position class for blocks.">BlockPosition</a>(0, 0, 0), dirt-&gt;<a class="code" href="class_block_prototype.html#aecee73acb976383a0a1c7717fbe8da80" title="Returns the default orientation for blocks of this type.">defaultOrientation</a>());</div>
<div class="line">      <a class="code" href="class_block_instance.html" title="Represents a particular instance of a block.">BlockInstance</a> grass_block(grass, <a class="code" href="class_block_position.html" title="A lightweight integer-precision position class for blocks.">BlockPosition</a>(0, 0, 0), grass-&gt;<a class="code" href="class_block_prototype.html#aecee73acb976383a0a1c7717fbe8da80" title="Returns the default orientation for blocks of this type.">defaultOrientation</a>());</div>
<div class="line">      <a class="code" href="class_block_transaction.html" title="Represents an atomic operation on the world that involves adding, removing, and replacing blocks...">BlockTransaction</a> transaction;</div>
<div class="line">      transaction.<a class="code" href="class_block_transaction.html#a8b22719e10cbadbeae1b2b5ea33a6a8b" title="Records the addition of new_block.">setBlock</a>(grass_block);</div>
<div class="line">      transaction.setBlock(dirt_block);</div>
</div><!-- fragment --><p>The transaction will record the addition of the grass block at 0, 0, 0, but will <em>not</em> record the subsequent overwriting of that block with dirt (luckily for the author, since otherwise it would corrupt the undo stack). </p>

</div>
</div>
<a class="anchor" id="a8eb1692c4ad10ac1efbb6aba998e1e63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlockTransaction::clearBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_block_instance.html">BlockInstance</a> &amp;&#160;</td>
          <td class="paramname"><em>old_block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Records the removal of <code>new_block</code>. </p>
<p>If you call <a class="el" href="class_block_transaction.html#a8eb1692c4ad10ac1efbb6aba998e1e63" title="Records the removal of new_block.">clearBlock()</a> and <a class="el" href="class_block_transaction.html#a8b22719e10cbadbeae1b2b5ea33a6a8b" title="Records the addition of new_block.">setBlock()</a> (in either order) for the same position in the same transaction, the result will be exactly equivalent to calling <a class="el" href="class_block_transaction.html#a6b0c5e8671704c302b8737ab0e904c06" title="Records the replacement of old_block with new_block.">replaceBlock()</a>.</p>
<p>Only the position of <code>old_block</code> is used when performing the transaction normally, but the block type is used when undoing the transaction, so it is important to pass accurate information about the old state of the world to avoid corrupting the undo stack. </p>

</div>
</div>
<a class="anchor" id="a91de4bbf9897e3aa052a66de8fac20c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html">QList</a>&lt;<a class="el" href="class_block_instance.html">BlockInstance</a>&gt;&amp; BlockTransaction::old_blocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a list of blocks that are removed from the world by this transaction. </p>
<p>When applying the transaction in the normal (forward) manner, these blocks should be removed <em>before</em> adding the blocks returned by <a class="el" href="class_block_transaction.html#af17795b86e97d151d13740a58d57dd2e" title="Returns a list of blocks that are added to the world by this transaction.">new_blocks()</a>. When applying the transaction backwards (for undo), these blocks should be added <em>after</em> removing the blocks returned by <a class="el" href="class_block_transaction.html#af17795b86e97d151d13740a58d57dd2e" title="Returns a list of blocks that are added to the world by this transaction.">new_blocks()</a>. </p>

</div>
</div>
<a class="anchor" id="af17795b86e97d151d13740a58d57dd2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html">QList</a>&lt;<a class="el" href="class_block_instance.html">BlockInstance</a>&gt;&amp; BlockTransaction::new_blocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a list of blocks that are added to the world by this transaction. </p>
<p>When applying the transaction in the normal (forward) manner, these blocks should be removed <em>before</em> adding the blocks returned by <a class="el" href="class_block_transaction.html#af17795b86e97d151d13740a58d57dd2e" title="Returns a list of blocks that are added to the world by this transaction.">new_blocks()</a>. When applying the transaction backwards (for undo), these blocks should be added <em>after</em> removing the blocks returned by <a class="el" href="class_block_transaction.html#af17795b86e97d151d13740a58d57dd2e" title="Returns a list of blocks that are added to the world by this transaction.">new_blocks()</a>. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ad03fbeabdc4918d9d4a04b54c09bee75"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qset.html">QSet</a>&lt;<a class="el" href="class_block_position.html">BlockPosition</a>&gt; BlockTransaction::old_positions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab0a056229027c15c45914b6da292a30e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qset.html">QSet</a>&lt;<a class="el" href="class_block_position.html">BlockPosition</a>&gt; BlockTransaction::new_positions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8ac0b736d708e9d206c500fe9edf31a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html">QList</a>&lt;<a class="el" href="class_block_instance.html">BlockInstance</a>&gt; BlockTransaction::old_blocks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a138b6cd80f98400a737c6b009e4f585b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="qt.tag:http://doc.qt.nokia.com/latest//" href="http://doc.qt.nokia.com/latest/qlist.html">QList</a>&lt;<a class="el" href="class_block_instance.html">BlockInstance</a>&gt; BlockTransaction::new_blocks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="block__transaction_8h_source.html">block_transaction.h</a></li>
<li>src/<a class="el" href="block__transaction_8cc.html">block_transaction.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_block_transaction.html">BlockTransaction</a></li>
    <li class="footer">Generated on Mon Jun 25 2012 02:33:09 for MCModeler by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.1 </li>
  </ul>
</div>
</body>
</html>
